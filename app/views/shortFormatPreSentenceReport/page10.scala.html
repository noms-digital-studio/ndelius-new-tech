@import data._
@import helper._
@import hiddenInputs._
@import play.Environment
@import data.viewModel.PageStatus
@import helpers.CallHelper.relative
@import org.webjars.play.WebJarsUtil

@(reportForm: Form[ShortFormatPreSentenceReportData], encrypter: String => String)(implicit pageStatuses: Map[Int, PageStatus], webJarsUtil: WebJarsUtil, environment: Environment)

@implicitField = @{ FieldConstructor(govukElements.f) }

@renderCheckList(entries: Seq[String]) = {

    @for((entry, index) <- entries.zipWithIndex) {
        @checkReportEntry(index + 2, entry, pageStatuses.get(index + 2))
    }
}

@main("Check your report - Short Format Pre Sentence Report") {

    <h1 class="heading-xlarge">Check your report</h1>

    @navigationEntries(renderCheckList, entries => entries.dropRight(2))

    <div class="margin-top medium">&nbsp;</div>

    @helper.form(action = relative(routes.ShortFormatPreSentenceReportController.wizardPost()), 'id -> "ndForm", 'novalidate -> "") {
        @govukGlobalErrors(reportForm)
        @CSRF.formField

        @commonFields(reportForm, encrypter)
        @page2Fields(reportForm, encrypter)
        @page3Fields(reportForm, encrypter)
        @page4Fields(reportForm)
        @page5Fields(reportForm)
        @page6Fields(reportForm)
        @page7Fields(reportForm)
        @page8Fields(reportForm)
        @page9Fields(reportForm)
        @page11Fields(reportForm, encrypter)

        @if(pageStatuses.values().drop(1).dropRight(2).exists { pageStatus => !(pageStatus.isVisited && pageStatus.isValid) }) {

            <input type="hidden" id="jumpNumber" name="jumpNumber" />
            <input type="hidden" id="pageNumber" name="pageNumber" value="10"/>

        } else {

            @footer(10, reportForm, encrypter, Some(("Sign", Some("Sign your report"))))
        }
    }
}
